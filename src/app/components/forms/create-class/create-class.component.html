<div class="create-class-container">
  <div class="form-wrapper">
    <h2>Crear Nueva Clase</h2>
    
    @if (errorMessage) {
    <div class="alert alert-danger">
      {{ errorMessage }}
    </div>
    }

    <form [formGroup]="classForm" (ngSubmit)="onSubmit()">
      <div class="form-group">
        <label for="activity">Actividad</label>
        <select 
          id="activity"
          formControlName="activity"
          class="form-control"
          [ngClass]="{ 'is-invalid': submitted && classForm.get('activity')?.errors }">
          <option value="">Selecciona una actividad</option>
          @for (activity of activities; track activity) {
            <option [value]="activity">{{ activity }}</option>
          }
        </select>
        @if (submitted && classForm.get('activity')?.errors) {
          <div class="invalid-feedback">
            La actividad es requerida
          </div>
        }
      </div>

      <div class="form-group">
        <label for="date">Fecha</label>
        <input
          type="date"
          id="date"
          formControlName="date"
          class="form-control"
          [ngClass]="{ 'is-invalid': submitted && classForm.get('date')?.errors }">
        @if (submitted && classForm.get('date')?.errors) {
          <div class="invalid-feedback">
            La fecha es requerida
          </div>
        }
      </div>

      <div class="form-row">
        <div class="form-group col-md-6">
          <label for="startTime">Hora de inicio</label>
          <input
            type="time"
            id="startTime"
            formControlName="startTime"
            class="form-control"
            [ngClass]="{ 'is-invalid': submitted && classForm.get('startTime')?.errors }">
          @if (submitted && classForm.get('startTime')?.errors) {
            <div class="invalid-feedback">
              La hora de inicio es requerida
            </div>
          }
        </div>

        <div class="form-group col-md-6">
          <label for="endTime">Hora de fin</label>
          <input
            type="time"
            id="endTime"
            formControlName="endTime"
            class="form-control"
            [ngClass]="{ 'is-invalid': submitted && classForm.get('endTime')?.errors }">
          @if (submitted && classForm.get('endTime')?.errors) {
            <div class="invalid-feedback">
              La hora de fin es requerida
            </div>
          }
        </div>
      </div>

      <div class="form-group">
        <label for="maxParticipants">Número máximo de participantes</label>
        <input
          type="number"
          id="maxParticipants"
          formControlName="maxParticipants"
          class="form-control"
          [ngClass]="{ 'is-invalid': submitted && classForm.get('maxParticipants')?.errors }">
        @if (submitted && classForm.get('maxParticipants')?.errors) {
          <div class="invalid-feedback">
            El número de participantes es requerido y debe ser mayor a 0
          </div>
        }
      </div>

      <div class="form-group">
        <label for="level">Nivel</label>
        <select
          id="level"
          formControlName="level"
          class="form-control"
          [ngClass]="{ 'is-invalid': submitted && classForm.get('level')?.errors }">
          <option value="">Selecciona un nivel</option>
          <option value="principiante">Principiante</option>
          <option value="intermedio">Intermedio</option>
          <option value="avanzado">Avanzado</option>
        </select>
        @if (submitted && classForm.get('level')?.errors) {
          <div class="invalid-feedback">
            El nivel es requerido
          </div>
        }
      </div>

      <div class="form-group">
        <label for="description">Descripción</label>
        <textarea
          id="description"
          formControlName="description"
          class="form-control"
          rows="3"
          [ngClass]="{ 'is-invalid': submitted && classForm.get('description')?.errors }">
        </textarea>
        @if (submitted && classForm.get('description')?.errors) {
          <div class="invalid-feedback">
            La descripción es requerida y debe tener al menos 10 caracteres
          </div>
        }
      </div>

      <div class="form-buttons">
        <button 
          type="submit" 
          class="btn btn-primary"
          [disabled]="loading">
          @if (loading) {
            <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
            Creando...
          } @else {
            Crear Clase
          }
        </button>
        <button 
          type="button" 
          class="btn btn-secondary" 
          (click)="onReset()">
          Cancelar
        </button>
      </div>
    </form>
  </div>
</div>
